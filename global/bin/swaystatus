#!/usr/bin/env bash

get_volume() {
  mute=$(cntrl volume is-muted)
  if [[ "$mute" == "yes" ]]; then
    printf "Muted"
  else
    volume=$(cntrl volume get)
    printf "%s" "$volume"
  fi
}

get_music() {
  lines=$(mpc | wc -l)
  if [[ "$lines" -gt "1" ]]; then
    mpc | head -n 1
  else
    printf "Not Playing"
  fi
}

i3status | while :
do
  read line

  volume=$(get_volume)
  brightness=$(cntrl brightness get)
  music=$(get_music)
  temp=$(cntrl temperature get)
  mem=$(cntrl memory get)

  echo "$music    ⛀ $mem    ⋇ $temp    ∿ $volume    ⚙ $brightness    $line "
done
