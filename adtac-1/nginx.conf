events {
  worker_connections 4096;
  multi_accept on;
  use epoll;
}

http {
  server_tokens off;

  add_header X-Frame-Options DENY;
  add_header X-Content-Type nosniff;

  gzip on;
  gzip_vary off;
  gzip_static on;
  gzip_min_length 2048;
  gzip_proxied any;
  gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml image/svg+xml;

  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;

  keepalive_timeout 30;

  access_log off;

  # LetsEncrypt wildcard certs
  ssl_certificate /etc/letsencrypt/live/commento.io/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/commento.io/privkey.pem;

  include mime.types;

  include conf.d/*;
}
